var app=app||{};app.AppView=Backbone.View.extend({el:"#nutritracker-app",events:{"click #search":"searchFood","keyup #food-input":"searchFood","click .result":"getFoodId"},resultsTemplate:_.template($("#results-template").html()),initialize:function(){this.$input=this.$("#food-input"),this.$results=this.$("#results-list"),this.singleFoodsArray=[],this.$singleFood=this.$("#singlefooddiv")},searchFood:function(){var e=this.$input.val().trim(),i=this,s={results:"0:5",fields:"*",appKey:"ba5c22dd374e75a04c9bbd9d5e89c273",appId:"b898ecf9"};$.ajax({url:"https://api.nutritionix.com/v1_1/search/"+e,data:s,success:function(e){e.hits.length>0&&i.displayResults(e.hits)},error:function(){}})},displayResults:function(e){var i={};this.$results.html("");for(var s=0;s<e.length;s++){var t=e[s].fields;i={id:t.item_id,name:t.item_name,brand:t.brand_name,serveQty:t.nf_serving_size_qty,serveUnit:t.nf_serving_size_unit,calories:t.nf_calories},this.$results.append(this.resultsTemplate({name:i.name,brand:i.brand,servingSize:i.serveQty,servingUnit:i.serveUnit,calories:i.calories,id:i.id}))}},getFoodId:function(e){var i=$(e.currentTarget).data("id");this.clearDetails();var s=new app.SingleFoodDescriptionView(i);this.singleFoodsArray.push(s)},clearDetails:function(){for(var e=this.singleFoodsArray,i=0,s=e.length;s>i;i++)e[i].remove();return this.singleFoodsArray=[],this}});