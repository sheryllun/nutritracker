var app=app||{};app.TrackerView=Backbone.View.extend({el:"#trackerdiv",trackerTemplate:_.template($("#tracker-template").html()),initialize:function(){this.listenTo(app.foodList,"update",this.render)},render:function(){var t=this,e=this.collection.byDate(app.currentDate),r=this.calcTotals(e);this.$el.html(this.trackerTemplate({totalcals:r.totalCals,totalfiber:r.totalFiber,totalprotein:r.totalProtein,totalsodium:r.totalSodium,totalsugar:r.totalSugar,totalfat:r.totalFat,totalcarbs:r.totalCarbs,totalvita:r.totalVitA+"%",totalvitc:r.totalVitC+"%",totalcalcium:r.totalCalcium+"%"})),t.renderProgressBar(r.totalVitA,"vit-a"),t.renderProgressBar(r.totalVitC,"vit-c"),t.renderProgressBar(r.totalCalcium,"calcium")},renderProgressBar:function(t,e){t>=100?$(".progress-bar."+e).css("width","100%"):$(".progress-bar."+e).css("width",t+"%")},calcTotals:function(t){var e={};return e.totalCals=t.reduce(function(t,e){return t+e.get("totalCals")},0),e.totalFiber=t.reduce(function(t,e){return t+e.get("fiber")},0),e.totalProtein=t.reduce(function(t,e){return t+e.get("protein")},0),e.totalSodium=t.reduce(function(t,e){return t+e.get("sodium")},0),e.totalSugar=t.reduce(function(t,e){return t+e.get("sugar")},0),e.totalFat=t.reduce(function(t,e){return t+e.get("fat")},0),e.totalCarbs=t.reduce(function(t,e){return t+e.get("carbs")},0),e.totalVitA=t.reduce(function(t,e){return t+e.get("vitA")},0),e.totalVitC=t.reduce(function(t,e){return t+e.get("vitC")},0),e.totalCalcium=t.reduce(function(t,e){return t+e.get("calcium")},0),e}});