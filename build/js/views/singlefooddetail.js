var app=app||{};app.SingleFoodDescriptionView=Backbone.View.extend({el:"#singlefooddiv",foodDescriptionTemplate:_.template($("#food-detail-template").html()),events:{"click #addfood":"addFood"},initialize:function(e){this.$input=this.$("#servings"),this.getFoodDetails(e)},getFoodDetails:function(e){var t=this,i={appKey:"ba5c22dd374e75a04c9bbd9d5e89c273",appId:"b898ecf9"};$.ajax({url:"https://api.nutritionix.com/v1_1/item?id="+e,data:i,success:function(e){t.render(e)},error:function(){}})},render:function(e){var t=e,i={name:t.item_name,brand:t.brand_name,serveQty:t.nf_serving_size_qty,serveUnit:t.nf_serving_size_unit,calories:t.nf_calories,calcium:null===t.nf_calcium_dv?0:t.nf_calcium_dv,fiber:null===t.nf_dietary_fiber?0:t.nf_dietary_fiber,protein:t.nf_protein,sodium:null===t.nf_sodium?0:t.nf_sodium,sugar:null===t.nf_sugars?0:t.nf_sugars,fat:t.nf_total_fat,carbs:t.nf_total_carbohydrate,vitA:null===t.nf_vitamin_a_dv?0:t.nf_vitamin_a_dv,vitC:null===t.nf_vitamin_c_dv?0:t.nf_vitamin_c_dv};this.$el.html(this.foodDescriptionTemplate({name:i.name,brand:i.brand,servingSize:i.serveQty,servingUnit:i.serveUnit,calories:i.calories,calcium:i.calcium,fiber:i.fiber,protein:i.protein,sodium:i.sodium,sugar:i.sugar,fat:i.fat,carbs:i.carbs,vitA:i.vitA,vitC:i.vitC}))},addFood:function(e){$(".error").remove();var t=$("#servings").val();if(!t||!t.match(/^[+]?\d+([.]\d+)?$/))return void $(".serving-input").append('<p class="error">Please enter a positive number</p>');var i=$(".item-name").text(),a=parseInt($(".calories").text()),n=parseInt($(".fiber").text()),r=parseInt($(".protein").text()),s=parseInt($(".sodium").text()),o=parseInt($(".sugar").text()),d=parseInt($(".carbs").text()),c=parseInt($(".fat").text()),l=parseInt($(".calcium").text()),f=parseInt($(".vita").text()),v=parseInt($(".vitc").text());app.foodList.create({name:i,servings:t,calories:a,fiber:n,protein:r,sodium:s,sugar:o,carbs:d,fat:c,calcium:l,vitA:f,vitC:v,totalCals:a*t}),$("#servings").val(""),location.href="#mylist"}});